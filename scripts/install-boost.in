#!/bin/sh

builddir="@builddir@"
prefix="@prefix@"
build="@build@"
host="@host@"
boost_header_dir='@BOOST_HEADER_DIR@'

case $build:$host in
  (*cygwin:*) boost_header_dir=$(cygpath  -u "$boost_header_dir");;
  (*:*mingw32) boost_header_dir=$(winepath -u "$boost_header_dir");;
esac

# Ensure we got it right.
if test ! -f  "$boost_header_dir"/version.hpp; then
  echo >&2 "failed to find boost include directory, got '$boost_header_dir'"
  exit 1
fi

# Symlinks.
boost_header_dir=$(perl -mCwd -e 'print Cwd::realpath($ARGV[0]), "\n";' \
                      -- "$boost_header_dir")

cp -pRP "$boost_header_dir" "$DESTDIR$prefix/include"

# Fix rights: the owner is allowed to change the headers.
chmod -R u+w "$DESTDIR$prefix/include"
