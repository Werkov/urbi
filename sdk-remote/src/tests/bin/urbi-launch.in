#! @SHELL@
# @configure_input@

set -e

case $VERBOSE in
  (x) set -x;;
esac

abs_top_srcdir='@abs_top_srcdir@'
abs_top_builddir='@abs_top_builddir@'
program=$abs_top_builddir/src/urbi-launch

# The libubbject we load depends on the usage.
echo >&2 "$0: $*"
case " $* " in
  (*' --start '*)
     # Spawning a new server, which requires a server.  Two cases:
     # this package is part of a kernel package, in which case we
     # should find libuobject.la in it.  Otherwise we hope a kernel
     # was installed, and the real urbi-launch will look for it at the
     # right place.
     if test -f $abs_top_builddir/../src/Makefile; then
       libuobjectdir=$abs_top_builddir/../src
     else
       # If we can't find the installed libuobject, skip the test.
       $program ||
         case $? in
           (72) exit 77;;
         esac
     fi;;
  (*)
     libuobjectdir=$abs_top_builddir/src/libuobject;;
esac

if test -n "$libuobjectdir"; then
  set x -c "$libuobjectdir/libuobject" "$@"
  shift
fi

exec "$program" "$@"

# Local Variables:
# mode: shell-script
# End:
