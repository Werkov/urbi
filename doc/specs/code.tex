\section{Code}

Objects that can be ``invoked'', comparable to \Cxx's Function Objects.

\subsection{Prototypes}

\begin{refObjects}
\item[Comparable]
\item[Executable]
\item[Object]
\end{refObjects}

\subsection{Slots}

\begin{itemize}
\item \lstinline|==(\var{that})|\\
  Whether \lstinline|this| and \var{that} are the same source code.
  It actually checks that both have the same \lstinline|asString|.
\begin{urbiassert}
function () { 1 } == function () { 1 };
function () { 1 } != closure  () { 1 };
closure  () { 1 } != function () { 1 };

function () { 1 + 1 } == function () { 1 + 1 };
function () { 1 + 2 } != function () { 2 + 1 };

function () { 1 } != function { 1 };
function () { 1 } != function (ignored) { 1 };
\end{urbiassert}

\item \lstinline|apply(\var{args})|\\
  Invoke the routine, with all the arguments.  The target,
  \lstinline|this|, will be set to \lstinline|\var{args}[0]| and the
  remaining arguments with be given as arguments.
\begin{urbiassert}
function (x, y) { x+y }.apply([nil, 10, 20]) == 30;
function () { this }.apply([123]) == 123;

// There is Object.apply.
1.apply([this]) == 1;
\end{urbiassert}
\begin{urbiscript}
function () {}.apply([]);
[00000001:error] !!! apply: list of arguments must begin with `this'

function () {}.apply([1, 2]);
[00000002:error] !!! apply: expected 0 argument, given 1
\end{urbiscript}

\item \lstinline|asString|\\
  Conversion to \refObject{String}.
\begin{urbiassert}
closure  () { 1 }.asString == "closure () {\n  1\n}";
function () { 1 }.asString == "function () {\n  1\n}";
\end{urbiassert}

\item \lstinline|bodyString|\\
  Conversion to \refObject{String} of the routine body.
\begin{urbiassert}
closure  () { 1 }.bodyString == "1";
function () { 1 }.bodyString == "1";
\end{urbiassert}

\end{itemize}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../urbi-sdk"
%%% ispell-personal-dictionary: "../urbi.dict"
%%% End:
