\section{File}

\subsection{Prototypes}
\begin{refObjects}
\item[Object]
\end{refObjects}

\subsection{Construction}

Files may be created from a \refObject{String}, or from a
\refObject{Path}.  The file must exist on the file system, and must be
a file.  You may use \lstinline|File.create| to create a file that
does not exist (or to override an existing one).

\begin{urbiscript}[firstnumber=1]
System.system("(echo 1; echo 2) >file.txt")|;
File.new("file.txt");
[00000001] File("file.txt")

File.new(Path.new("file.txt"));
[00000001] File("file.txt")
\end{urbiscript}

You may use \refObject{InputStream} and \refObject{OutputStream} to
read or write to Files.

\subsection{Slots}

\begin{urbiscriptapi}
\item[asList]
  Read the file, and return its content as a list of its lines.
\begin{urbiscript}
System.system("(echo 1; echo 2) >file.txt")|;
assert(File.new("file.txt").asList == ["1", "2"]);
\end{urbiscript}

\item[asPrintable]
\begin{urbiscript}
System.system("(echo 1; echo 2) >file.txt")|;
assert(File.new("file.txt").asPrintable == "File(\"file.txt\")");
\end{urbiscript}

\item[asString]
  The name of the opened file.
\begin{urbiscript}
System.system("(echo 1; echo 2) >file.txt")|;
assert(File.new("file.txt").asString == "file.txt");
\end{urbiscript}

\item[content]
  The content of the file as a \refObject{Binary} object.
\begin{urbiscript}
System.system("(echo 1; echo 2) >file.txt")|;
assert(File.new("file.txt").content.data == "1\n2\n");
\end{urbiscript}

\item \lstinline|create(\var{name})|\\
  If the file \var{name} exists, return a File to it, otherwise create
  an empty one, and return a File to it.  See \refObject{OutputStream}
  for methods to add content to the file.
\begin{urbiscript}
System.system("(echo 1; echo 2) >file.txt")|;
assert(File.create("file.txt").asPrintable == "File(\"file.txt\")");
assert(File.new("file.txt").content.data == "1\n2\n");

assert(File.create("new.txt").content.empty);
\end{urbiscript}

\item[remove]
  Remove the current file.
\begin{urbiscript}
System.system("(echo 1; echo 2) >file.txt")|;
File.new("file.txt").remove;
assert(!Path.new("file.txt").exists);
\end{urbiscript}

\item \lstinline|rename(\var{name})|\\
  Rename the file to \var{name}.  If the target exists, it is replaced by
  the opened file.
\begin{urbiscript}
System.system("(echo 1; echo 2) >foo.txt")|;
File.new("foo.txt").rename("bar.txt");
assert(!Path.new("foo.txt").exists);
assert(File.new("bar.txt").content.data == "1\n2\n");
\end{urbiscript}


\end{urbiscriptapi}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../urbi-sdk"
%%% ispell-dictionary: "american"
%%% ispell-personal-dictionary: "../urbi.dict"
%%% End:
