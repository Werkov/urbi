%% Copyright (C) 2009-2010, Gostai S.A.S.
%%
%% This software is provided "as is" without warranty of any kind,
%% either expressed or implied, including but not limited to the
%% implied warranties of fitness for a particular purpose.
%%
%% See the LICENSE file for more information.

\section{Directory}

A \dfn{Directory} represents a directory of the file system.

\subsection{Prototypes}
\begin{refObjects}
\item[Object]
\end{refObjects}

\subsection{Construction}

A \dfn{Directory} can be constructed with one argument: the path of
the directory using a \refObject{String} or a \refObject{Path}. It can
also be constructed by the method open of \refObject{Path}.

\begin{urbiscript}[firstnumber=1]
Directory.new(".");
[00000001] Directory(".")
Directory.new(Path.new("."));
[00000002] Directory(".")
\end{urbiscript}

\subsection{Slots}
\begin{urbiscriptapi}
\item[asList]
  The contents of the directory as a \refObject{Path} list.  The
  various paths include the name of the directory \lstinline|this|.

\item[content]
  The contents of the directory as a \refObject{String} list.  The
  strings include only the last component name; they do not contain
  the directory name of \lstinline|this|.

\item \lstinline|fileCreated(\var{name)|\\
  Event launched when a file is created inside the directory.  Be careful,
  this slot may not exists if the \us interpreter does not support for it.

\begin{urbiscript}
// watch the fileCreated event.
at (Directory.new(".").fileCreated?(var name))
  echo("File '%s' created." % name);

// Create a file to launch the fileCreated event.
File.create("./dummy-file.txt")|;

// wait until the event is reported.
sleep(1s);
[00000001] *** File 'dummy-file.txt' created.
\end{urbiscript}

\item \lstinline|fileDeleted(\var{name)|\\
  Event launched when a file is deleted from the directory.  Be careful,
  this slot may not exists if the \us interpreter does not support for it.

\begin{urbiscript}
// watch the fileDeleted event.
at (Directory.new(".").fileDeleted?(var name))
  echo("File '%s' deleted." % name);

// Remove a file to launch the fileDeleted event.
File.new("./dummy-file.txt").remove|;

// wait until the event is reported.
sleep(1s);
[00000001] *** File 'dummy-file.txt' deleted.
\end{urbiscript}


\end{urbiscriptapi}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../urbi-sdk"
%%% ispell-dictionary: "american"
%%% ispell-personal-dictionary: "../urbi.dict"
%%% fill-column: 76
%%% End:
