\section{Path}

A \dfn{Path} points to a file system entity (directory, file and so
forth).

\subsection{Prototypes}
\begin{itemize}
\item \refObject{Comparable}
\item \refObject{Orderable}
\end{itemize}

\subsection{Construction}

A \lstinline|Path| is contructed with the string that points to the
file system entity. This path can be relative or absolute.

\begin{urbiscript}
Path.new("/path/file.u");
[00000001] Path("/path/file.u")
\end{urbiscript}

Some minor simplifications are made, such as stripping useless
\file{./} occurrences.

\begin{urbiscript}[firstnumber=last]
Path.new("././///.//foo/");
[00000002] Path("foo")
\end{urbiscript}

\subsection{Methods}
\begin{itemize}
\item \lstinline|absolute|\\
  Whether \lstinline|this| is absolute.
\begin{urbiscript}[firstnumber=last]
assert(Path.new("/abs/path").absolute);
assert(!Path.new("rel/path").absolute);
\end{urbiscript}

\item \lstinline|asList|\\
  List of names used in path (directories and possibly file), from
  bottom up. There is no difference between relative path and absolute
  path.
\begin{urbiscript}[firstnumber=last]
assert(Path.new("/path/to/file.u").asList == ["path", "to", "file.u"]);
assert(Path.new("/path").asList           == Path.new("path").asList);
\end{urbiscript}

\item \lstinline|basename|\\
  Base name of the path.
\begin{urbiscript}[firstnumber=last]
assert(Path.new("/absolute/path/file.u").basename == "file.u");
assert(Path.new("relative/path/file.u").basename  == "file.u");
\end{urbiscript}

\item \lstinline|cd|\\
  Change current working directory to \lstinline|this|. Return the new
  current working directory as a \lstinline|Path|.

\item \lstinline|cwd|\\
  The current working directory.
\begin{urbiscript}[firstnumber=last]
// Save current directory.
var pwd = Path.cwd|
// Go into ``/''.
assert(Path.new("/").cd == Path.new("/"));
// Current working directory is ``/''.
assert(Path.cwd         == Path.new("/"));
// Go back to the directory we were in.
assert(pwd.cd           == pwd);
\end{urbiscript}

\item \lstinline|dirname|\\
  Directory name of the path.
\begin{urbiscript}[firstnumber=last]
assert(Path.new("/abs/path/file.u").dirname == Path.new("/abs/path"));
assert(Path.new("rel/path/file.u").dirname  == Path.new("rel/path"));
\end{urbiscript}

\item \lstinline|exists|\\
  Whether something (a file, a directory, \ldots) exists where
  \lstinline|this| points to.
\begin{urbiscript}[firstnumber=last]
assert(Path.cwd.exists);
assert(Path.new("/").exists);
assert(!Path.new("/this/path/does/not/exists").exists);
\end{urbiscript}

\item \lstinline|isDir|\\
  Whether \lstinline|this| is a directory.
\begin{urbiscript}[firstnumber=last]
assert(Path.cwd.isDir);
\end{urbiscript}

\item \lstinline|isReg|\\
  Whether \lstinline|this| is a regular file.
\begin{urbiscript}[firstnumber=last]
assert(!Path.cwd.isReg);
\end{urbiscript}

\item \lstinline|open|\\
  Open \lstinline|this|. Return either a \dfn{Directory} or a
  \dfn{File} according the type of \lstinline|this|. See
  \refObject{File} and \refObject{Directory}.

\item \lstinline|readable|\\
  Whether \lstinline|this| is readable.
\begin{urbiscript}[firstnumber=last]
assert(Path.new("/tmp").readable);
\end{urbiscript}

\item \lstinline|writable|\\
  Whether \lstinline|this| is writable.
\begin{urbiscript}[firstnumber=last]
assert(Path.new("/tmp").writable);
\end{urbiscript}

\item \lstinline|'/'(\var{rhs})|\\
  Create a new \dfn{Path} that is the concatenation of
  \lstinline|this| and \lstinline|\var{rhs}|. \lstinline|\var{rhs}|
  can be a \dfn{Path} or a \dfn{String} and cannot be absolute.
\begin{urbiscript}[firstnumber=last]
assert(Path.new("/con/ca") / Path.new("te/na/tion")
       == Path.new("/con/ca/te/na/tion"));
Path.cwd / Path.new("/tmp/foo");
[00000003:error] !!! /: Rhs of concatenation is absolute: /tmp/foo
\end{urbiscript}

\item \lstinline|'=='(\var{that})|\\
  Same as comparing the string versions of \lstinline|this| and
  \var{that}.  Beware that two paths may be different and point to the
  very same location.
\begin{urbiscript}[firstnumber=last]
assert(  Path.new("/a")  == Path.new("/a"));
assert(!(Path.new("/a")  == Path.new("a")  ));
\end{urbiscript}

\item \lstinline|'<'(\var{that})|\\
  Same as comparing the string versions of \lstinline|this| and
  \var{that}.
\begin{urbiscript}[firstnumber=last]
assert(  Path.new("/a")   < Path.new("/a/b"));
assert(!(Path.new("/a/b") < Path.new("/a")  ));
\end{urbiscript}

\end{itemize}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../urbi-sdk"
%%% End:
