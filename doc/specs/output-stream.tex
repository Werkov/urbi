%% Copyright (C) 2009-2010, Gostai S.A.S.
%%
%% This software is provided "as is" without warranty of any kind,
%% either expressed or implied, including but not limited to the
%% implied warranties of fitness for a particular purpose.
%%
%% See the LICENSE file for more information.

\section{OutputStream}

OutputStreams are used to write (possibly binary) files by hand.

\subsection{Prototypes}
\begin{refObjects}
\item[Object]
\end{refObjects}

\subsection{Construction}

An OutputStream is a writing-interface to a file; its constructor
requires a \refObject{File}.  If the file already exists, content is
\emph{appended} to it.  Remove the file beforehand if you want to
override its content.

\begin{urbiscript}[firstnumber=1]
System.system("(echo 1; echo 2) >file.txt")|;
OutputStream.new(File.new("file.txt"));
[00000001] OutputStream_0x827000

OutputStream.new(File.create("new.txt"));
[00000001] OutputStream_0x827000
\end{urbiscript}

\subsection{Slots}

\begin{urbiscriptapi}
\item \lstinline|<<(\var{that})|\\
  Output \lstinline|\var{this}.asString|.  Return \this to
  enable chains of calls.
\begin{urbiassert}
{
  {
    var o = OutputStream.new(File.create("fresh.txt"));
    o << 1 << "2" << [3, [4]];
  };
  File.new("fresh.txt").content.data;
}
==
"12[3, [4]]";
\end{urbiassert}

\item[close]
  Flush the buffers, and close the file.
\begin{urbiassert}
OutputStream.new(File.create("file.txt")).close.isVoid;
\end{urbiassert}

\item[putByte](<byte>)%
  In order to private efficient input/output operations,
  \dfn[buffer]{buffers} are used.  As a consequence, what is put into
  a stream might not be immediately saved on the actual file.  To
  \dfn{flush} a buffer means to dump its content to the file.
\begin{urbiassert}
OutputStream.new(File.create("file.txt")).flush.isVoid;
\end{urbiassert}
\end{urbiscriptapi}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../urbi-sdk"
%%% ispell-dictionary: "american"
%%% ispell-personal-dictionary: "../urbi.dict"
%%% fill-column: 76
%%% End:
