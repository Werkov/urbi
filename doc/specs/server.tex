\section{Server}

A \dfn{Server} can listen to incoming connections.  See
\refObject{Socket} for an example.

\subsection{Prototypes}
\begin{itemize}
\item \refObject{Object}
\end{itemize}

\subsection{Construction}

A \lstinline|Server| is constructed with no argument. At creation, a
new \lstinline|Server| has its own slot \lstinline|connection|. This
slot is an event that is launched when a connection establishes.

\begin{urbiscript}[firstnumber=last]
var s = Server.new|
s.localSlotNames;
[00000001] ["connection"]
\end{urbiscript}

\subsection{Slots}
\begin{itemize}
\item \lstinline|connection|\\
  The event launched at each incoming connection. This event is
  launched with one argument: the socket of the established connection.
\begin{urbiscript}[firstnumber=last]
at (s.connection?(var socket))
{
  // This code is run at each connection. 'socket' is the incoming
  // connection.
};
\end{urbiscript}

\item \lstinline|host|\\
  The host on which \lstinline|this| is listening. Raise an error if
  \lstinline|this| is not listening.
\begin{urbiscript}[firstnumber=last]
Server.host;
[00000003:error] !!! host: server not listening
\end{urbiscript}

\item \lstinline|listen(\var{host}, \var{port})|\\
  Listen incoming connections with \var{host} and \var{port}.

\item \lstinline|port|\\
  The port on which \lstinline|this| is listening. Raise an error if
  \lstinline|this| is not listening.
\begin{urbiscript}[firstnumber=last]
Server.port;
[00000004:error] !!! port: server not listening
\end{urbiscript}

\item \lstinline|sockets|\\
  The list of the sockets created at each incoming connection.
\end{itemize}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../urbi-sdk"
%%% ispell-personal-dictionary: "../urbi.dict"
%%% End:
